<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data noupdate="0">

    <act_window id="action_open_picking_delivery_package_wizard"
		name="Delivery Package Wizard"
		src_model="stock.picking"
		res_model="picking.delivery.package.wizard"
		target="new"
		view_mode="form"
		view_id="wizard_picking_delivery_package"
		multi="False"
		context="{}"/>

   <record id="picking_type_view_inherit" model="ir.ui.view">
      <field name="name">picking.type.channel.inherit</field>
      <field name="model">stock.picking.type</field>
      <field name="inherit_id" ref="stock.view_picking_type_form" />
      <field name="arch" type="xml">
         <xpath expr="//field[@name='barcode']" position="after">
            <field name="backorder_channel_id" string="Backorder Channel"  />
         </xpath>
      </field>
   </record>
    
    <record id="view_picking_form_delivery_inherit_tmg" model="ir.ui.view">
      <field name="name">picking_form_delivery_inherit_tmg</field>
      <field name="model">stock.picking</field>
      <field name="inherit_id" ref="stock.view_picking_form"/>
      <field name="arch" type="xml">

        <xpath expr="//notebook" position="inside">
	  <page string="Packages" attrs="{'invisible': [('picking_type_code', '!=', 'outgoing')]}">
	    <group>
	      <field name="package_ids" nolabel="1">
	      	<tree>
		  <field name="display_name"/>
		  <field name="shipping_weight"/>
		  <field name="packaging_id"/>
		  <field name="height"/>
		  <field name="width"/>
		  <field name="length"/>
	      	</tree>
	      </field>
	    </group>
	    <group>
	      <button name="%(action_open_picking_delivery_package_wizard)d" type="action" string="Define Packages" class="btn-sm btn-primary" attrs="{'invisible': [('state', '=', 'done'), ('carrier_tracking_ref', 'not in', ['', False])]}"/>
	    </group>
	  </page>
        </xpath>
        
      </field>
    </record>
  </data>
</odoo>
